!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("pixijs-charm"),require("fpsmeter")):"function"==typeof define&&define.amd?define("lightweight-pixijs-engine",["pixijs-charm","fpsmeter"],t):"object"==typeof exports?exports["lightweight-pixijs-engine"]=t(require("pixijs-charm"),require("fpsmeter")):e["lightweight-pixijs-engine"]=t(e["pixijs-charm"],e.fpsmeter)}(this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);n(5);var o=n(1);n(6),i(n(7)),i(n(8)),i(n(2)),i(n(1));var s;!function(e){e[e.PAUSED=1]="PAUSED",e[e.RUNNING=2]="RUNNING"}(s=t.EnumEngineStates||(t.EnumEngineStates={}));var a;!function(e){e[e.NO_SCALE=0]="NO_SCALE",e[e.EXACT_FIT=1]="EXACT_FIT",e[e.NO_BORDER=2]="NO_BORDER",e[e.SHOW_ALL=3]="SHOW_ALL",e[e.FIXED_HEIGHT=4]="FIXED_HEIGHT",e[e.FIXED_WIDTH=5]="FIXED_WIDTH"}(a=t.EnumScaleMode||(t.EnumScaleMode={}));var c=function(){function e(){this._rootContainer=new PIXI.Container,this._state=s.PAUSED}return Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sceneManager",{get:function(){return o.sceneManagerInstance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"charm",{get:function(){return this._charm},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"debugMode",{get:function(){return this._config.debugMode},enumerable:!0,configurable:!0}),e.prototype.pause=function(){this._state=s.PAUSED},e.prototype.resume=function(){this._state=s.RUNNING},e.prototype.initialize=function(e){var t=this;this._isInitialized||(this._isInitialized=!0,this._config=e||{},this._config.resolution=e.resolution||window.devicePixelRatio,this._config.debugMode=e.debugMode||!1,this._config.resizeWithBrowserSize=!1!==e.resizeWithBrowserSize,this._config.scaleMode=this._config.scaleMode||a.NO_SCALE,this._config.debugMode&&this._initializeFpsMeter(),this._renderer=PIXI.autoDetectRenderer(e),console.log(this._renderer.type===PIXI.RENDERER_TYPE.WEBGL?"Using WebGL Renderer":"Using Canvas renderer"),this._config.view||document.body.appendChild(this._renderer.view),this._charm=new r.Charm(PIXI),o.sceneManagerInstance.initialize(this._rootContainer),this._mainLoop(),this._config.resizeWithBrowserSize&&(document.body.style.overflowX=document.body.style.overflowY="hidden",this._resizeWithBrowserSize(),window.addEventListener("resize",function(e){t._resizeWithBrowserSize()}),window.addEventListener("deviceOrientation",function(e){t._resizeWithBrowserSize()})),this._state=s.RUNNING)},e.prototype._mainLoop=function(){var e=this;requestAnimationFrame(function(){e._mainLoop()});var t=o.sceneManagerInstance.currentScene;if(this._state===s.RUNNING&&t){this._config.debugMode&&this._fpsMeter.tickStart(),this._charm.update();for(var n=0,i=this._rootContainer.children;n<i.length;n++){var r=i[n];r.visible&&r.updateFrame&&r.updateFrame()}this._renderer.render(this._rootContainer),this._config.debugMode&&this._fpsMeter.tick()}},e.prototype._initializeFpsMeter=function(){this._fpsMeter=new FPSMeter},e.prototype._resizeWithBrowserSize=function(){var e=this._renderer.view,t=window.innerWidth+(e.width-e.offsetWidth),n=window.innerHeight+(e.height-e.offsetHeight),i=this._config.width,r=this._config.height;switch(e.width=t*window.devicePixelRatio,e.height=n*window.devicePixelRatio,e.style.width=t+"px",e.style.height=n+"px",this._renderer.resize(e.width,e.height),this._config.scaleMode){case a.EXACT_FIT:this._rootContainer.scale.x=t/i,this._rootContainer.scale.y=n/r;break;case a.NO_BORDER:this._rootContainer.scale.x=n/r<t/i?t/i:n/r,this._rootContainer.scale.y=this._rootContainer.scale.x;break;case a.SHOW_ALL:this._rootContainer.scale.x=n/r<t/i?n/r:t/i,this._rootContainer.scale.y=this._rootContainer.scale.x;break;case a.FIXED_HEIGHT:this._rootContainer.scale.x=n/r,this._rootContainer.scale.y=this._rootContainer.scale.x;break;case a.FIXED_WIDTH:this._rootContainer.scale.x=t/i,this._rootContainer.scale.y=this._rootContainer.scale.x;break;default:this._rootContainer.scale.x=1,this._rootContainer.scale.y=1}this._rootContainer.x=.5*(t-i*this._rootContainer.scale.x),this._rootContainer.y=.5*(n-r*this._rootContainer.scale.y),window.scrollTo(0,0)},e}();t.pixiEngineInstance=new c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._scenes={},this._currentScene=void 0}return e.prototype.initialize=function(e){return void 0===this._rootContainer&&(this._rootContainer=e,this._rootContainer.name="RootScene",!0)},Object.defineProperty(e.prototype,"currentScene",{get:function(){return this._currentScene},enumerable:!0,configurable:!0}),e.prototype.createScene=function(e,t){return this._scenes[e]?void console.warn("Scene with id:'"+e+"' already exists"):(this._scenes[e]=new t,this._scenes[e])},e.prototype.createAndReplaceScene=function(e,t){var n=!1,i=this.createScene(e,t);return i&&((n=this.replaceScene(i))||this.destroyScene(i)),n},e.prototype.destroySceneById=function(e){if(!this._scenes[e])return void console.warn("Scene with id:'"+e+"' not found");this._scenes[e].destroy({children:!0,texture:!0,baseTexture:!0}),delete this._scenes[e]},e.prototype.destroyScene=function(e){for(var t in this._scenes)if(this._scenes.hasOwnProperty(t)&&this._scenes[t]===e)return this.destroySceneById(t)},e.prototype.getScene=function(e){var t=this._scenes[e];return t||console.warn("Scene with id:'"+e+"' not found"),t},e.prototype.replaceSceneFromId=function(e){var t=this._scenes[e];return t?this.replaceScene(t):(console.warn("Scene with id:'"+e+"' not found"),!1)},e.prototype.replaceSceneWithTransition=function(e){var t=this;return this._rootContainer.addChild(e.nextContainer),e.start().then(function(){return t._currentScene&&t._rootContainer.removeChild(t._currentScene),e.restore(),t._currentScene=e.nextContainer,!0})},e.prototype.replaceScene=function(e){return this._rootContainer.addChild(e),this._currentScene&&this._rootContainer.removeChild(this._currentScene),this._currentScene=e,!0},e}();t.sceneManagerInstance=new i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.getContainerProperties=function(e){return{height:e.height,pivot:{x:e.pivot.x,y:e.pivot.y},position:{x:e.position.x,y:e.position.y},rotation:e.rotation,scale:{x:e.scale.x,y:e.scale.y},skew:{x:e.skew.x,y:e.skew.y},width:e.width}},e.setContainerProperties=function(e,t){t.height=e.height,t.rotation=e.rotation,t.width=e.width,t.position.copy(e.position),t.pivot.copy(e.pivot),t.scale.copy(e.scale),t.skew.copy(e.skew)},e}();t.ContainerHelpers=i},function(e,t,n){e.exports=n(0)},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),s=n(2);!function(e){e[e.UP=1]="UP",e[e.DOWN=3]="DOWN",e[e.LEFT=4]="LEFT",e[e.RIGHT=12]="RIGHT"}(r=t.EnumDirections||(t.EnumDirections={}));var a=function(){function e(){}return e.linear="linear",e.smoothstep="smoothstep",e.smoothstepSquared="smoothstepSquared",e.smoothstepCubed="smoothstepCubed",e.acceleration="acceleration",e.accelerationCubed="accelerationCubed",e.deceleration="deceleration",e.decelerationCubed="decelerationCubed",e.sine="sine",e.sineSquared="sineSquared",e.sineCubed="sineCubed",e.inverseSine="inverseSine",e.inverseSineSquared="inverseSineSquared",e.inverseSineCubed="inverseSineCubed",e.bounce="bounce",e}();t.EasingTypes=a;var c=function(){function e(e,t){this._nextContainer=t,this._currentContainer=e,this._currentContainerOriginalState=s.ContainerHelpers.getContainerProperties(e),this._currentContainerEndState=s.ContainerHelpers.getContainerProperties(e),this._nextContainerOriginalState=s.ContainerHelpers.getContainerProperties(t),this._nextContainerEndState=s.ContainerHelpers.getContainerProperties(t)}return Object.defineProperty(e.prototype,"nextContainer",{get:function(){return this._nextContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContainer",{get:function(){return this._currentContainer},enumerable:!0,configurable:!0}),e.prototype.restore=function(){s.ContainerHelpers.setContainerProperties(this._currentContainerOriginalState,this._currentContainer)},e}();t.ContainerTransitionBase=c;var u=function(e){function t(t,n,i,r,o){var s=e.call(this,t,n)||this;return s._direction=i,s._frames=r,s._easingType=o,s._configure(),s}return i(t,e),t.prototype.start=function(){var e=this;return new Promise(function(t,n){e._nextSceneTween=o.pixiEngineInstance.charm.slide(e._nextContainer,e._nextContainerEndState.position.x,e._nextContainerEndState.position.y,e._frames,e._easingType),e._currentSceneTween=o.pixiEngineInstance.charm.slide(e._currentContainer,e._currentContainerEndState.position.x,e._currentContainerEndState.position.y),e._currentSceneTween.onCompleted=function(){t()}})},t.prototype.stop=function(){o.pixiEngineInstance.charm.removeTween(this._nextSceneTween),o.pixiEngineInstance.charm.removeTween(this._currentSceneTween)},t.prototype._configure=function(){this._nextContainerEndState.position.y=this._nextContainerOriginalState.position.y,this._nextContainerEndState.position.x=this._nextContainerOriginalState.position.x,(this._direction&r.UP)===r.UP&&(this._currentContainerEndState.position.y=-this._currentContainer.parent.height),(this._direction&r.DOWN)===r.DOWN&&(this._currentContainerEndState.position.y=this._currentContainer.parent.height),(this._direction&r.LEFT)===r.LEFT&&(this._currentContainerEndState.position.x=-this._currentContainer.parent.width),(this._direction&r.RIGHT)===r.RIGHT&&(this._currentContainerEndState.position.x=this._currentContainer.parent.width),this.nextContainer.position.y=-this._currentContainerEndState.position.y,this.nextContainer.position.x=-this._currentContainerEndState.position.x},t}(c);t.ContainerTransitionSlide=u;var h=function(e){function t(t,n,i,r,o){var s=e.call(this,t,n,i,r,o)||this;return s._configure(),s}return i(t,e),t.prototype.start=function(){return this._nextSceneFadeInTween=o.pixiEngineInstance.charm.fadeIn(this._nextContainer),e.prototype.start.call(this)},t.prototype.stop=function(){e.prototype.stop.call(this),o.pixiEngineInstance.charm.removeTween(this._nextSceneFadeInTween)},t.prototype._configure=function(){e.prototype._configure.call(this),this._currentContainerEndState.position.x=this._currentContainerOriginalState.position.x,this._currentContainerEndState.position.y=this._currentContainerOriginalState.position.y,this._nextContainer.alpha=0},t}(u);t.ContainerTransitionFadeIn=h;var p=function(e){function t(t,n,i,r,o){var s=e.call(this,t,n,i,r,o)||this;return s._configure(),s}return i(t,e),t.prototype.start=function(){return this._currentContainer.parent.getChildIndex(this._currentContainer)<this._currentContainer.parent.getChildIndex(this._nextContainer)&&this._currentContainer.parent.swapChildren(this._currentContainer,this._nextContainer),o.pixiEngineInstance.charm.fadeOut(this.currentContainer),e.prototype.start.call(this)},t.prototype.stop=function(){e.prototype.stop.call(this),o.pixiEngineInstance.charm.removeTween(this._nextSceneFadeOutTween)},t.prototype.restore=function(){e.prototype.restore.call(this),this.currentContainer.alpha=1},t.prototype._configure=function(){e.prototype._configure.call(this),this.nextContainer.position.y=this._nextContainerOriginalState.position.x,this.nextContainer.position.x=this._nextContainerOriginalState.position.y},t}(u);t.ContainerTransitionFadeOut=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.applyMixins=function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(n){e.prototype[n]=t.prototype[n]})})},e.createInstance=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=Object.create(e[t].prototype);return r.constructor.apply(r,n),r},e.loadScript=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=void 0,t())}:n.onload=function(){t()},n.src=e,document.body.appendChild(n)},e}();t.Helpers=i}])});