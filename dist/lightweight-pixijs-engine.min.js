!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("pixijs-charm"),require("fpsmeter")):"function"==typeof define&&define.amd?define("lightweight-pixijs-engine",["pixijs-charm","fpsmeter"],t):"object"==typeof exports?exports["lightweight-pixijs-engine"]=t(require("pixijs-charm"),require("fpsmeter")):e["lightweight-pixijs-engine"]=t(e["pixijs-charm"],e.fpsmeter)}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4);n(5);var o=n(1);n(6),r(n(7)),r(n(8)),r(n(2)),r(n(1));var a;!function(e){e[e.PAUSED=1]="PAUSED",e[e.RUNNING=2]="RUNNING"}(a=t.EnumEngineStates||(t.EnumEngineStates={}));var s=function(){function e(){this._rootContainer=new PIXI.Container,this._state=a.PAUSED}return Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sceneManager",{get:function(){return o.sceneManagerInstance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"charm",{get:function(){return this._charm},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"debugMode",{get:function(){return this._config.debugMode},enumerable:!0,configurable:!0}),e.prototype.pause=function(){this._state=a.PAUSED},e.prototype.resume=function(){this._state=a.RUNNING},e.prototype.initialize=function(e){var t=this;this._isInitialized||(this._isInitialized=!0,this._config=e||{},this._config.resolution=e.resolution||window.devicePixelRatio,this._config.debugMode=e.debugMode||!1,this._config.scaleToWindow=e.scaleToWindow||!1,this._config.debugMode&&this._initializeFpsMeter(),this._renderer=PIXI.autoDetectRenderer(e),console.log(this._renderer.type===PIXI.RENDERER_TYPE.WEBGL?"Using WebGL Renderer":"Using Canvas renderer"),this._config.view||document.body.appendChild(this._renderer.view),this._config.scaleToWindow&&(this._scaleToWindow(this._renderer.view),window.addEventListener("resize",function(e){t._scaleToWindow(t._renderer.view)})),this._charm=new i.Charm(PIXI),o.sceneManagerInstance.initialize(this._rootContainer),this._mainLoop(),this._state=a.RUNNING)},e.prototype._mainLoop=function(){var e=this;requestAnimationFrame(function(){e._mainLoop()});var t=o.sceneManagerInstance.currentScene;if(this._state===a.RUNNING&&t){this._config.debugMode&&this._fpsMeter.tickStart(),this._charm.update();for(var n=0,r=this._rootContainer.children;n<r.length;n++){var i=r[n];i.visible&&i.updateFrame&&i.updateFrame()}this._renderer.render(this._rootContainer),this._config.debugMode&&this._fpsMeter.tick()}},e.prototype._initializeFpsMeter=function(){this._fpsMeter=new FPSMeter},e.prototype._scaleToWindow=function(e,t){t=t||"#2C3539";var n,r,i,o;n=window.innerWidth/e.offsetWidth,r=window.innerHeight/e.offsetHeight,i=Math.min(n,r),e.style.transformOrigin="0 0",e.style.transform="scale("+i+")",o=e.offsetWidth>e.offsetHeight?e.offsetWidth*i<window.innerWidth?"horizontally":"vertically":e.offsetHeight*i<window.innerHeight?"vertically":"horizontally";var a;return"horizontally"===o&&(a=(window.innerWidth-e.offsetWidth*i)/2,e.style.marginTop="0",e.style.marginBottom="0",e.style.marginLeft=a+"px",e.style.marginRight=a+"px"),"vertically"===o&&(a=(window.innerHeight-e.offsetHeight*i)/2,e.style.marginTop=a+"px",e.style.marginBottom=a+"px",e.style.marginLeft="0",e.style.marginRight="0"),e.style.paddingLeft="0",e.style.paddingRight="0",e.style.paddingTop="0",e.style.paddingBottom="0",e.style.display="block",document.body.style.backgroundColor=t,i},e}();t.pixiEngineInstance=new s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._scenes={},this._currentScene=void 0}return e.prototype.initialize=function(e){return void 0===this._rootContainer&&(this._rootContainer=e,this._rootContainer.name="RootScene",!0)},Object.defineProperty(e.prototype,"currentScene",{get:function(){return this._currentScene},enumerable:!0,configurable:!0}),e.prototype.createScene=function(e,t){return this._scenes[e]?void console.warn("Scene with id:'"+e+"' already exists"):(this._scenes[e]=new t,this._scenes[e])},e.prototype.createAndReplaceScene=function(e,t){var n=!1,r=this.createScene(e,t);return r&&((n=this.replaceScene(r))||this.destroyScene(r)),n},e.prototype.destroySceneById=function(e){if(!this._scenes[e])return void console.warn("Scene with id:'"+e+"' not found");this._scenes[e].destroy({children:!0,texture:!0,baseTexture:!0}),delete this._scenes[e]},e.prototype.destroyScene=function(e){for(var t in this._scenes)if(this._scenes.hasOwnProperty(t)&&this._scenes[t]===e)return this.destroySceneById(t)},e.prototype.getScene=function(e){var t=this._scenes[e];return t||console.warn("Scene with id:'"+e+"' not found"),t},e.prototype.replaceSceneFromId=function(e){var t=this._scenes[e];return t?this.replaceScene(t):(console.warn("Scene with id:'"+e+"' not found"),!1)},e.prototype.replaceSceneWithTransition=function(e){var t=this;return this._rootContainer.addChild(e.nextContainer),e.start().then(function(){return t._currentScene&&t._rootContainer.removeChild(t._currentScene),e.restore(),t._currentScene=e.nextContainer,!0})},e.prototype.replaceScene=function(e){return this._rootContainer.addChild(e),this._currentScene&&this._rootContainer.removeChild(this._currentScene),this._currentScene=e,!0},e}();t.sceneManagerInstance=new r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.getContainerProperties=function(e){var t={height:e.height,rotation:e.rotation,width:e.width,x:e.x,y:e.y};return t.pivot.copy(e.pivot),t.scale.copy(e.scale),t.skew.copy(e.skew),t},e.setContainerProperties=function(e,t){t.height=e.height,t.pivot.copy(e.pivot),t.rotation=e.rotation,t.scale.copy(e.scale),t.skew.copy(e.skew),t.width=e.width,t.x=e.x,t.y=e.y},e}();t.ContainerHelpers=r},function(e,t,n){e.exports=n(0)},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(0),a=n(2);!function(e){e[e.UP=1]="UP",e[e.DOWN=3]="DOWN",e[e.LEFT=4]="LEFT",e[e.RIGHT=12]="RIGHT"}(i=t.EnumDirections||(t.EnumDirections={}));var s=function(){function e(){}return e.linear="linear",e.smoothstep="smoothstep",e.smoothstepSquared="smoothstepSquared",e.smoothstepCubed="smoothstepCubed",e.acceleration="acceleration",e.accelerationCubed="accelerationCubed",e.deceleration="deceleration",e.decelerationCubed="decelerationCubed",e.sine="sine",e.sineSquared="sineSquared",e.sineCubed="sineCubed",e.inverseSine="inverseSine",e.inverseSineSquared="inverseSineSquared",e.inverseSineCubed="inverseSineCubed",e.bounce="bounce",e}();t.EasingTypes=s;var c=function(){function e(e,t){this._nextContainer=t,this._currentContainer=e,this._currentContainerOriginalState=a.ContainerHelpers.getContainerProperties(e),this._currentContainerEndState=a.ContainerHelpers.getContainerProperties(e),this._nextContainerOriginalState=a.ContainerHelpers.getContainerProperties(t),this._nextContainerEndState=a.ContainerHelpers.getContainerProperties(t)}return Object.defineProperty(e.prototype,"nextContainer",{get:function(){return this._nextContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContainer",{get:function(){return this._currentContainer},enumerable:!0,configurable:!0}),e.prototype.restore=function(){a.ContainerHelpers.setContainerProperties(this._currentContainerOriginalState,this._currentContainer)},e}();t.ContainerTransitionBase=c;var u=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n)||this;return a._direction=r,a._frames=i,a._easingType=o,a._configure(),a}return r(t,e),t.prototype.start=function(){var e=this;return new Promise(function(t,n){e._nextSceneTween=o.pixiEngineInstance.charm.slide(e._nextContainer,e._nextContainerEndState.x,e._nextContainerEndState.y,e._frames,e._easingType),e._currentSceneTween=o.pixiEngineInstance.charm.slide(e._currentContainer,e._currentContainerEndState.x,e._currentContainerEndState.y),e._currentSceneTween.onCompleted=function(){t()}})},t.prototype.stop=function(){o.pixiEngineInstance.charm.removeTween(this._nextSceneTween),o.pixiEngineInstance.charm.removeTween(this._currentSceneTween)},t.prototype._configure=function(){this._nextContainerEndState.y=this._nextContainerOriginalState.y,this._nextContainerEndState.x=this._nextContainerOriginalState.x,(this._direction&i.UP)===i.UP&&(this._currentContainerEndState.y=-this._currentContainer.parent.height),(this._direction&i.DOWN)===i.DOWN&&(this._currentContainerEndState.y=this._currentContainer.parent.height),(this._direction&i.LEFT)===i.LEFT&&(this._currentContainerEndState.x=-this._currentContainer.parent.width),(this._direction&i.RIGHT)===i.RIGHT&&(this._currentContainerEndState.x=this._currentContainer.parent.width),this.nextContainer.y=-this._currentContainerEndState.y,this.nextContainer.x=-this._currentContainerEndState.x},t}(c);t.ContainerTransitionSlide=u;var p=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i,o)||this;return a._configure(),a}return r(t,e),t.prototype.start=function(){return this._nextSceneFadeInTween=o.pixiEngineInstance.charm.fadeIn(this._nextContainer),e.prototype.start.call(this)},t.prototype.stop=function(){e.prototype.stop.call(this),o.pixiEngineInstance.charm.removeTween(this._nextSceneFadeInTween)},t.prototype._configure=function(){e.prototype._configure.call(this),this._currentContainerEndState.x=this._currentContainerOriginalState.x,this._currentContainerEndState.y=this._currentContainerOriginalState.y,this._nextContainer.alpha=0},t}(u);t.ContainerTransitionFadeIn=p;var h=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i,o)||this;return a._configure(),a}return r(t,e),t.prototype.start=function(){return this._currentContainer.parent.getChildIndex(this._currentContainer)<this._currentContainer.parent.getChildIndex(this._nextContainer)&&this._currentContainer.parent.swapChildren(this._currentContainer,this._nextContainer),o.pixiEngineInstance.charm.fadeOut(this.currentContainer),e.prototype.start.call(this)},t.prototype.stop=function(){e.prototype.stop.call(this),o.pixiEngineInstance.charm.removeTween(this._nextSceneFadeOutTween)},t.prototype.restore=function(){e.prototype.restore.call(this),this.currentContainer.alpha=1},t.prototype._configure=function(){e.prototype._configure.call(this),this.nextContainer.y=this._nextContainerOriginalState.x,this.nextContainer.x=this._nextContainerOriginalState.y},t}(u);t.ContainerTransitionFadeOut=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.applyMixins=function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(n){e.prototype[n]=t.prototype[n]})})},e.createInstance=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Object.create(e[t].prototype);return i.constructor.apply(i,n),i},e.loadScript=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=void 0,t())}:n.onload=function(){t()},n.src=e,document.body.appendChild(n)},e}();t.Helpers=r}])});